<div class="row pt-5 pb-2">
  <span class="page-title ps-5">Edit Profile</span>
</div>

<div class="container">
  <div class="user-info">
    <form #form="ngForm" (ngSubmit)="saveUser(user)">
      <div class="row" style="width: 80%; margin-top: 20px">
        <div class="form-group col-md-6">
          <label for="firstName">First Name</label>
          <input type="text"
                 name="firstName"
                 class="form-control"
                 id="firstName"
                 aria-describedby="emailHelp"
                 maxlength="50"
                 minlength="1"
                 required
                 (change)="isChanged()"
                 [(ngModel)]="user.firstName"
                 #firstName="ngModel"
                 [ngClass]="{
               'is-invalid': (firstName.touched || firstName.dirty)
               && !firstName.valid, 'is-valid' : firstName.valid
               && (firstName.touched || firstName.dirty)}"
          >
          <span class="invalid-feedback">
            <span *ngIf="firstName.hasError('minlength')">First name must at least be 1 characters long.</span>
            <span *ngIf="firstName.hasError('required')">First Name is required.</span>
            <span *ngIf="firstName.hasError('maxlength')">Maximum length for a first name is 50 characters long.</span>
          </span>
        </div>
        <div class="form-group col-md-6">
          <label for="lastName">Last Name</label>
          <input type="text"
                 name="lastName"
                 class="form-control"
                 id="lastName"
                 aria-describedby="emailHelp"
                 minlength="1"
                 maxlength="50"
                 required
                 (change)="isChanged()"
                 [(ngModel)]="user.lastName"
                 #lastName="ngModel"
                 [ngClass]="{
               'is-invalid': (lastName.touched || lastName.dirty)
               && !lastName.valid, 'is-valid' : lastName.valid
               && (lastName.touched || lastName.dirty)}"
          >
          <span class="invalid-feedback">
            <span *ngIf="lastName.hasError('minlength')">Last name must at least be 1 characters long.</span>
            <span *ngIf="lastName.hasError('required')">Last name is required.</span>
            <span *ngIf="lastName.hasError('maxlength')">Maximum length for a last name is 50 characters long.</span>
          </span>
        </div>
      </div>

      <div class="row" style="width: 80%; margin-top: 20px">
        <div class="form-group col-md-4">
          <label for="country">Country</label>
          <input type="text"
                 name="country"
                 class="form-control"
                 id="country"
                 aria-describedby="emailHelp"
                 maxlength="56"
                 minlength="2"
                 (change)="isChanged()"
                 [(ngModel)]="user.address.country"
                 #country="ngModel"
                 [ngClass]="{
               'is-invalid': (country.touched || country.dirty)
               && !country.valid, 'is-valid' : country.valid
               && (country.touched || country.dirty)}"
          >
          <span class="invalid-feedback">
            <span *ngIf="country.hasError('minlength')">Country must at least be 2 characters long.</span>
            <span *ngIf="country.hasError('maxlength')">Maximum length for a country is 56 characters long.</span>
          </span>
        </div>
        <div class="form-group col-md-4">
          <label for="city">City</label>
          <input type="text"
                 name="city"
                 class="form-control"
                 id="city"
                 aria-describedby="emailHelp"
                 maxlength="150"
                 minlength="2"
                 (change)="isChanged()"
                 [(ngModel)]="user.address.city"
                 #city="ngModel"
                 [ngClass]="{
               'is-invalid': (city.touched || city.dirty)
               && !city.valid, 'is-valid' : city.valid
               && (city.touched || city.dirty)}"
          >
          <span class="invalid-feedback">
            <span *ngIf="city.hasError('minlength')">City must at least be 2 characters long.</span>
            <span *ngIf="city.hasError('maxlength')">Maximum length for a city is 150 characters long.</span>
          </span>
        </div>
        <div class="form-group col-md-4">
          <label for="postalCode">Postal Code</label>
          <input type="text"
                 name="postalCode"
                 class="form-control"
                 id="postalCode"
                 aria-describedby="emailHelp"
                 maxlength="18"
                 minlength="3"
                 (change)="isChanged()"
                 [(ngModel)]="user.address.postalCode"
                 #pc="ngModel"
                 [ngClass]="{
               'is-invalid': (pc.touched || pc.dirty)
               && !pc.valid, 'is-valid' : pc.valid
               && (pc.touched || pc.dirty)}"
          >
          <span class="invalid-feedback">
            <span *ngIf="pc.hasError('minlength')">Postal code must at least be 3 characters long.</span>
            <span *ngIf="pc.hasError('maxlength')">Maximum length for a postal code is 18 characters long.</span>
          </span>
        </div>
      </div>
      <div class="row" style="width: 80%; margin-top: 20px">
        <div class="form-group col-md-6" style="margin-top: 0">
          <label for="street">Street</label>
          <input type="text"
                 name="street"
                 class="form-control"
                 id="street"
                 aria-describedby="emailHelp"
                 maxlength="255"
                 minlength="2"
                 (change)="isChanged()"
                 [(ngModel)]="user.address.street"
                 #street="ngModel"
                 [ngClass]="{
               'is-invalid': (street.touched || street.dirty)
               && !street.valid, 'is-valid' : street.valid
               && (street.touched || street.dirty)}"
          >
          <span class="invalid-feedback">
            <span *ngIf="street.hasError('minlength')">Street must at least be 2 characters long.</span>
            <span *ngIf="street.hasError('maxlength')">Maximum length for a street is 255 characters long.</span>
          </span>
        </div>
        <div class="form-group col-md-6" style="margin-top: 0">
          <label for="streetNr">Street Nr.</label>
          <input type="text"
                 name="streetNr"
                 class="form-control"
                 id="streetNr"
                 aria-describedby="emailHelp"
                 maxlength="150"
                 minlength="1"
                 (change)="isChanged()"
                 [(ngModel)]="user.address.streetNr"
                 #strNr="ngModel"
                 [ngClass]="{
               'is-invalid': (strNr.touched || strNr.dirty)
               && !strNr.valid, 'is-valid' : strNr.valid
               && (strNr.touched || strNr.dirty)}"
          >
          <span class="invalid-feedback">
            <span *ngIf="strNr.hasError('minlength')">Street number must at least be 1 characters long.</span>
            <span *ngIf="strNr.hasError('maxlength')">Maximum length for a street number is 150 characters long.</span>
          </span>
        </div>
      </div>
      <div class="mrs" style="margin-top: 40px; margin-bottom: 40px; width: 50%">
        <div class="row">
          <div class="col-sm">
            <button class="btn btn-primary rounded-pill" style="width: 100%; text-align: center; justify-content: center; display:flex; background-color: rebeccapurple;" [disabled]="form.invalid || !isUpdated" (submit)="saveUser(user)">Save</button>
          </div>
          <div class="col-sm">
            <button class="btn btn-primary rounded-pill" style="width: 100%; text-align: center; justify-content: center; display:flex; background-color: mediumpurple;" (click)="router.navigateByUrl('/user-profile')">Cancel</button>
          </div>
        </div>
      </div>
    </form>
  </div>

</div>

